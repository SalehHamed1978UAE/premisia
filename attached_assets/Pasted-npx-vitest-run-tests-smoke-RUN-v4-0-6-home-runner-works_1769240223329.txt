npx vitest run tests/smoke/

 RUN  v4.0.6 /home/runner/workspace

stdout | tests/smoke/module-registry-smoke.spec.ts > Module Registry API Smoke Tests > Modules Endpoint > should list registered modules
✓ Found 6 registered modules

stdout | tests/smoke/module-registry-smoke.spec.ts > Module Registry API Smoke Tests > Modules Endpoint > should have required module properties
✓ Module structure valid: Strategic Input Processor (processor)

stdout | tests/smoke/module-registry-smoke.spec.ts > Module Registry API Smoke Tests > Modules Endpoint > should have analyzer modules
✓ Found 4 analyzer modules

stdout | tests/smoke/module-registry-smoke.spec.ts > Module Registry API Smoke Tests > Journeys Endpoint > should list journey configs
✓ Found 1 journey configs

stderr | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests
Error cleaning up test data: error: update or delete on table "users" violates foreign key constraint "journey_sessions_user_id_fkey" on table "journey_sessions"
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at cleanupTestData (/home/runner/workspace/tests/test-db-setup.ts:29:5)
    at /home/runner/workspace/tests/smoke/journey-smoke.spec.ts:24:5 {
  length: 349,
  severity: 'ERROR',
  code: '23503',
  detail: 'Key (id)=(security-test-user-a-1763009964573) is still referenced from table "journey_sessions".',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'journey_sessions',
  column: undefined,
  dataType: undefined,
  constraint: 'journey_sessions_user_id_fkey',
  file: 'ri_triggers.c',
  line: '2621',
  routine: 'ri_ReportViolation'
}

stdout | tests/smoke/module-registry-smoke.spec.ts > Module Registry API Smoke Tests > Journeys Endpoint > should resolve individual journey by ID
✓ Journey resolved: business_model_innovation

stdout | tests/smoke/module-registry-smoke.spec.ts > Module Registry API Smoke Tests > Stats Endpoint > should return registry statistics
✓ Registry stats: {"success":true,"moduleCount":6,"journeyCount":1,"availableJourneys":1}...

stderr | tests/smoke/module-registry-smoke.spec.ts
Error cleaning up test data: error: update or delete on table "users" violates foreign key constraint "journey_sessions_user_id_fkey" on table "journey_sessions"
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at cleanupTestData (/home/runner/workspace/tests/test-db-setup.ts:29:5)
    at /home/runner/workspace/tests/setup.ts:25:3 {
  length: 349,
  severity: 'ERROR',
  code: '23503',
  detail: 'Key (id)=(security-test-user-a-1763009964573) is still referenced from table "journey_sessions".',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'journey_sessions',
  column: undefined,
  dataType: undefined,
  constraint: 'journey_sessions_user_id_fkey',
  file: 'ri_triggers.c',
  line: '2621',
  routine: 'ri_ReportViolation'
}

 ✓ tests/smoke/module-registry-smoke.spec.ts (8 tests) 929ms
stdout | tests/smoke/repository-smoke.spec.ts > Repository Smoke Tests
[Container] ✓ Services and repositories registered

stdout | tests/smoke/repository-smoke.spec.ts > Repository Smoke Tests > EPM Repository > should resolve without error
✓ EPM Repository resolved

stdout | tests/smoke/repository-smoke.spec.ts > Repository Smoke Tests > EPM Repository > should perform findAll query without error
✓ EPM Repository findAll returned 5 records

stdout | tests/smoke/repository-smoke.spec.ts > Repository Smoke Tests > Journey Repository > should resolve without error
✓ Journey Repository resolved

stdout | tests/smoke/repository-smoke.spec.ts > Repository Smoke Tests > Journey Repository > should perform findAll query without error
✓ Journey Repository findAll returned 5 records

stdout | tests/smoke/repository-smoke.spec.ts > Repository Smoke Tests > Strategy Repository > should resolve without error
✓ Strategy Repository resolved

stdout | tests/smoke/repository-smoke.spec.ts > Repository Smoke Tests > Strategy Repository > should perform findAll query without error
✓ Strategy Repository findAll returned 5 records

stdout | tests/smoke/repository-smoke.spec.ts > Repository Smoke Tests > Export Services > should have all exporters registered
✓ All 5 exporters registered

stderr | tests/smoke/repository-smoke.spec.ts
Error cleaning up test data: error: update or delete on table "users" violates foreign key constraint "journey_sessions_user_id_fkey" on table "journey_sessions"
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at cleanupTestData (/home/runner/workspace/tests/test-db-setup.ts:29:5)
    at /home/runner/workspace/tests/setup.ts:25:3 {
  length: 349,
  severity: 'ERROR',
  code: '23503',
  detail: 'Key (id)=(security-test-user-a-1763009964573) is still referenced from table "journey_sessions".',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'journey_sessions',
  column: undefined,
  dataType: undefined,
  constraint: 'journey_sessions_user_id_fkey',
  file: 'ri_triggers.c',
  line: '2621',
  routine: 'ri_ReportViolation'
}

 ✓ tests/smoke/repository-smoke.spec.ts (17 tests) 492ms
stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should create understanding and classify as B2C for physical product
✓ Understanding created: 813481d0-7ebe-40d6-8894-41ce163177b4

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should confirm classification for segment discovery
✓ Classification confirmed

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should start segment discovery
✓ Discovery started for 813481d0-7ebe-40d6-8894-41ce163177b4

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 1/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 2/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 3/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 4/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 5/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 6/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 7/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 8/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 9/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 10/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 11/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 12/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 13/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 14/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 15/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 16/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 17/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 18/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 19/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 20/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 21/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 22/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 23/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 24/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 25/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 26/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 27/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 28/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 29/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 30/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 31/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 32/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 33/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 34/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 35/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 36/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 37/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 38/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 39/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 40/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 41/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 42/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 43/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 44/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 45/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 46/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 47/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 48/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 49/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
  Polling... 50/60 (status: running)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should complete discovery with consumer segments (not B2B)
✓ Discovery completed

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Marketing Consultant (Segment Discovery) > should have B2C consumer segments (not B2B distribution)
✓ Gene dimensions are consumer-focused: demographic_segment, psychographic_profile, lifestyle_context...
✓ Validation plan is consumer-focused (5 steps)

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Module Registry API > should list registered modules
✓ Found 6 registered modules

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Module Registry API > should list journey configs
✓ Found 1 journey configs

stdout | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Module Registry API > should return registry stats
✓ Registry stats available

stderr | tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests
Error cleaning up test data: error: update or delete on table "users" violates foreign key constraint "journey_sessions_user_id_fkey" on table "journey_sessions"
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at cleanupTestData (/home/runner/workspace/tests/test-db-setup.ts:29:5)
    at /home/runner/workspace/tests/smoke/journey-smoke.spec.ts:29:5 {
  length: 349,
  severity: 'ERROR',
  code: '23503',
  detail: 'Key (id)=(security-test-user-a-1763009964573) is still referenced from table "journey_sessions".',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'journey_sessions',
  column: undefined,
  dataType: undefined,
  constraint: 'journey_sessions_user_id_fkey',
  file: 'ri_triggers.c',
  line: '2621',
  routine: 'ri_ReportViolation'
}

stderr | tests/smoke/journey-smoke.spec.ts
Error cleaning up test data: error: update or delete on table "users" violates foreign key constraint "journey_sessions_user_id_fkey" on table "journey_sessions"
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at processTicksAndRejections (node:internal/process/task_queues:95:5)
    at cleanupTestData (/home/runner/workspace/tests/test-db-setup.ts:29:5)
    at /home/runner/workspace/tests/setup.ts:25:3 {
  length: 349,
  severity: 'ERROR',
  code: '23503',
  detail: 'Key (id)=(security-test-user-a-1763009964573) is still referenced from table "journey_sessions".',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'journey_sessions',
  column: undefined,
  dataType: undefined,
  constraint: 'journey_sessions_user_id_fkey',
  file: 'ri_triggers.c',
  line: '2621',
  routine: 'ri_ReportViolation'
}

 ❯ tests/smoke/journey-smoke.spec.ts (12 tests | 4 failed) 266585ms
       × should create strategic understanding 185ms
       × should start BMC research 1ms
       × should complete BMC research (poll for completion) 1ms
       × should generate EPM with valid workstreams 1ms
       ✓ should create understanding and classify as B2C for physical product  4950ms
       ✓ should confirm classification for segment discovery 105ms
       ✓ should start segment discovery 268ms
       ✓ should complete discovery with consumer segments (not B2B)  259270ms
       ✓ should have B2C consumer segments (not B2B distribution)  607ms
       ✓ should list registered modules 49ms
       ✓ should list journey configs 50ms
       ✓ should return registry stats 53ms

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯ Failed Tests 4 ⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯

 FAIL  tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Strategic Consultant (EPM Generation) > should create strategic understanding
AssertionError: expected 400 to be 200 // Object.is equality

- Expected
+ Received

- 200
+ 400

 ❯ tests/smoke/journey-smoke.spec.ts:46:31
     44|         .expect('Content-Type', /json/);
     45| 
     46|       expect(response.status).toBe(200);
       |                               ^
     47|       const data = response.body;
     48|       expect(data.id).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/4]⎯

 FAIL  tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Strategic Consultant (EPM Generation) > should start BMC research
AssertionError: expected undefined to be defined
 ❯ tests/smoke/journey-smoke.spec.ts:54:31
     52| 
     53|     it('should start BMC research', async () => {
     54|       expect(understandingId).toBeDefined();
       |                               ^
     55|       
     56|       const response = await request(API_BASE)

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/4]⎯

 FAIL  tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Strategic Consultant (EPM Generation) > should complete BMC research (poll for completion)
AssertionError: expected undefined to be defined
 ❯ tests/smoke/journey-smoke.spec.ts:73:25
     71| 
     72|     it('should complete BMC research (poll for completion)', async () => {
     73|       expect(sessionId).toBeDefined();
       |                         ^
     74|       
     75|       const maxAttempts = 60; // 5 minutes with 5s intervals

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/4]⎯

 FAIL  tests/smoke/journey-smoke.spec.ts > Journey Smoke Tests > Strategic Consultant (EPM Generation) > should generate EPM with valid workstreams
AssertionError: expected undefined to be defined
 ❯ tests/smoke/journey-smoke.spec.ts:103:31
    101| 
    102|     it('should generate EPM with valid workstreams', async () => {
    103|       expect(understandingId).toBeDefined();
       |                               ^
    104|       
    105|       const response = await request(API_BASE)

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/4]⎯


 Test Files  1 failed | 2 passed (3)
      Tests  4 failed | 33 passed (37)
   Start at  06:28:38
   Duration  268.72s (transform 1.37s, setup 1.54s, collect 2.29s, tests 268.01s, environment 1ms, prepare 54ms)
