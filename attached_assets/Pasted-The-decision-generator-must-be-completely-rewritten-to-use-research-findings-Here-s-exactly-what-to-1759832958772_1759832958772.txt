The decision generator must be completely rewritten to use research findings. Here's exactly what to change:
CHANGE 1: Decision Generator Input
Current (WRONG):
typescriptgenerateDecisions(input: StrategyInput, rootCause: string)
New (CORRECT):
typescriptgenerateDecisions(
  input: StrategyInput, 
  rootCause: string,
  researchFindings: ResearchFindings,
  portersAnalysis: PortersAnalysis,
  strategicRecommendations: string[]
)
CHANGE 2: Decision Generation Prompt
Add this to the Claude prompt for decision generation:
CRITICAL CONSTRAINT: You must generate decisions that are CONSISTENT WITH RESEARCH FINDINGS.

Research findings provided:
${JSON.stringify(researchFindings)}

Porter's analysis conclusions:
${JSON.stringify(portersAnalysis)}

Top strategic recommendations:
${strategicRecommendations.join('\n')}

RULES FOR DECISION OPTIONS:
1. If research CONTRADICTS an assumption from the original input, DO NOT recommend options based on that assumption
2. Prioritize options that align with research findings
3. Mark as "Recommended" only options supported by research
4. If input mentioned a strategy that research contradicted, generate alternative options instead

EXAMPLE:
Input said: "Arabic language differentiation"
Research found: "English dominates UAE business (78% of enterprises)"

WRONG decisions:
❌ "Cultural Intelligence Pioneer - emphasize Arabic capabilities" (Recommended)
❌ "Enhanced Arabic AI" (Recommended)

CORRECT decisions:
✅ "English-First with Multilingual Support" (Recommended) - aligns with research
✅ "Emiratization Compliance Features" (Recommended) - research showed this is regulatory necessity
⚠️ "Arabic Language Option" (NOT Recommended) - research shows limited demand

Generate 3-4 decision points with 2-4 options each. Each decision must reflect research findings, not just original input assumptions.
CHANGE 3: Validation Logic
Before returning decisions, validate them against research:
typescriptfunction validateDecisionsAgainstResearch(
  decisions: Decision[],
  researchFindings: ResearchFindings
): ValidationResult {
  
  const contradictions = [];
  
  // Check if any recommended option contradicts research
  decisions.forEach(decision => {
    decision.options.forEach(option => {
      if (option.recommended) {
        // Example: Check if option emphasizes Arabic when research says English dominates
        if (option.description.includes('Arabic') && 
            researchFindings.language_preferences.includes('English dominates')) {
          contradictions.push({
            decision: decision.question,
            option: option.label,
            issue: 'Recommends Arabic focus but research shows English dominates'
          });
        }
      }
    });
  });
  
  if (contradictions.length > 0) {
    throw new Error(`Decision generation contradicts research: ${JSON.stringify(contradictions)}`);
  }
  
  return { valid: true };
}
CHANGE 4: Update API Flow
Modify /api/strategic-consultant/decisions/generate:
Current flow:
Input → Generate Decisions → Return
New flow:
Input → 5 Whys → Research → Porter's Analysis → Generate Strategic Recommendations → Generate Decisions (using all above) → Validate Against Research → Return
CHANGE 5: Example Decision Structure
For the UAE SaaS case where research contradicted Arabic differentiation, generate decisions like this:
Decision 1: Market Positioning
json{
  "question": "How should we position our platform in the UAE market?",
  "options": [
    {
      "id": "english_first",
      "label": "English-First Global Alternative",
      "description": "Position as premium English-based platform with optional multilingual support",
      "recommended": true,
      "reasoning": "Research shows English is dominant business language in 78% of UAE enterprises",
      "budget_impact": "$2.0M-$2.5M",
      "timeline": "12 months"
    },
    {
      "id": "compliance_focus",
      "label": "Emiratization Compliance Leader", 
      "description": "Focus on UAE labor law compliance features and reporting",
      "recommended": true,
      "reasoning": "Research identified mandatory compliance needs as key buyer driver",
      "budget_impact": "$1.8M-$2.3M",
      "timeline": "10 months"
    },
    {
      "id": "cultural_pioneer",
      "label": "Cultural Intelligence Pioneer",
      "description": "Arabic-first platform with cultural analytics",
      "recommended": false,
      "reasoning": "Research contradicts: English dominates UAE business, limited willingness-to-pay for Arabic features",
      "budget_impact": "$2.5M-$3.5M",
      "timeline": "18 months",
      "warning": "Not recommended - contradicts research findings"
    }
  ]
}
Notice:

Options supported by research are marked recommended: true
Option contradicted by research is marked recommended: false with warning
Reasoning cites specific research findings

CHANGE 6: Test Validation
After implementing, test with UAE SaaS input. Verify:
✅ Decision 1 recommends English-first or Compliance-focused options
✅ Decision 1 does NOT recommend Arabic-first as top choice
✅ Any Arabic-focused options include warnings citing research
✅ Recommendations align with Porter's analysis and strategic recommendations
✅ Budget allocations reflect recommended strategy, not contradicted strategy
Implement these 6 changes now.